(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[15399],{572752:(e,t,s)=>{function i(e){return`${e.userAgent.isMobile?"mobile":"desktop"}.${e.country}.${e.userAgent.platform}.${e.userAgent.browserName}`.replace(/ /g,"_")}s.d(t,{Z:()=>i})},808475:(e,t,s)=>{s.d(t,{k:()=>I});var i=s(667294),n=s(966338),o=s(509860),a=s(6637),r=s(231486),l=s(124237),c=s(160585),d=s(572752),h=s(643913),_=s(966113),u=s(226198),p=s(957161),g=s(83969),x=s(826067),m=s(867820);async function f(e){await(0,g.Px)();const t=function(){if("undefined"==typeof window)return null;const e=window.google;return e&&e.accounts&&e.accounts.oauth2}();if(t){t.initCodeClient({client_id:_.Z.settings.GPLUS_CLIENT_ID,scope:"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile",ux_mode:"popup",callback:e}).requestCode()}}let w;const b=`${_.Z.settings.LINE_CLIENT_ID}`,j=async(e,t,s,i)=>{const n=(0,x.mB)(e);n.state&&n.code&&n.state===i&&w&&!w.closed&&w.close(),fetch("/oauth/line/verify",{headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","x-csrftoken":"undefined"!=typeof window?`${String(r.U2(u.fS))}`:""},method:"POST",body:(0,h.Z)({code:n.code,redirect_uri:s})}).then((e=>e.json())).then((({id_token:e,access_token:s})=>{e&&s?t.success({line_id_token:e,line_access_token:s}):t.error("error")})).catch((e=>t.error(e)))};function y(){}let S;Object.assign(y.prototype,{optionsForNetwork:{},connect({i18n:e,network:t,options:i,requestContext:n,viewer:o}){i=Object.assign({},{success(){},error(){},complete(){}},i),(0,m.My)(`auth_web.social_connect.${t}.${(0,d.Z)(n)}`),i.rerequest_facebook_email?Promise.resolve().then(s.bind(s,107193)).then((({default:e})=>{e((e=>{e.login((e=>{var t;const s=e.authResponse;let n,o;s&&(n=s.grantedScopes,n=n?n.split(","):[],o=s.userID);const a=null===(t=n)||void 0===t?void 0:t.find((e=>"email"===e)),r={id:o};"connected"===e.status&&a?i.success(r):i.error(r),i.complete()}),{scope:"email",auth_type:"rerequest",return_scopes:!0})}),o)})):"gplus"===t||"google"===t?this.connectGoogle(i):"line"===t?this.connectLine(i,n,e):Promise.resolve().then(s.bind(s,509860)).then((({default:s})=>{const n=i.windowOptions||s.getWindowOptions(),o=window.open("/connect/"+t+"/","",n);if(!o)return l.Z.showError(e._('You must enable popups!', ' - ', ' -- ')),void i.error({network:t,alertedUpstream:!0});const a=setInterval((()=>{o.closed&&(clearInterval(a),this.handleComplete({network:t,error_message:"Window closed."}))}),1e3);this.optionsForNetwork=Object.assign(this.optionsForNetwork,{[t]:i})}))},connectGoogle(e){(0,m.My)("auth_web.social_connect.google.migration"),f((t=>{e.success({one_time_code:t.code,redirect_uri:"postmessage"})}))},connectLine(e,t){const{locale:s}=t,i=`${window.location.origin}/oauth/line/redirect`,n=(0,c.Z)(10);window.addEventListener("message",(t=>((e,t,s,i)=>{e.isTrusted&&e.origin===window.location.origin&&e.data&&j(String(e.data),t,s,i)})(t,e,i,n))),window.addEventListener("storage",(t=>((e,t,s,i)=>{if(e.isTrusted&&e.url.startsWith(window.location.origin)&&"lineOAuthOneTimeCode"===e.key){const e=(0,p.qn)("lineOAuthOneTimeCode");e&&j(e,t,s,i)}})(t,e,i,n))),w=window.open(`https://access.line.me/oauth2/v2.1/authorize?response_type=code&client_id=${b}&redirect_uri=${encodeURIComponent(i)}&state=${n}&ui_locales=${s}&scope=profile%20openid%20email`,"_blank")},complete(e){this.handleComplete(e)},handleComplete(e){const t=e.network;if("facebook"===t){const t=e.id;t&&"string"!=typeof t&&(e.error_message="Facebook id must be of string type")}if(this.optionsForNetwork[t]){const s=this.optionsForNetwork[t];this.optionsForNetwork[t]=null,e.error_message?s.error(e):s.success(e),s.complete()}}}),Object.assign(y,{instance:()=>(S||(S=new y),S)}),window.addEventListener("message",(e=>{const t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");e.origin===t&&e.data&&"social-connect-complete"===e.data.type&&y.instance().complete(e.data)}));const v=y;var C=s(19121),P=s(414327),k=s(780280),z=s(79830);class A{constructor({invalidateResource:e,requestContext:t,viewer:s}){this.getUserId=()=>s.isAuth?s.id:"",this.getUsername=()=>s.isAuth?s.username:"",this.isLimitedLogin=()=>s.isLimitedLogin,this.invalidateResource=e,this.requestContext=t,this.viewer=s}handleConnect(e,t,s,i){if(t&&!this.isLimitedLogin()){const n={success:function(i){const n={network:e,data:i};this._internalConnectNetwork(t,n,s)}.bind(this),error(e){s.error&&s.error(e)},complete(){s.complete&&s.complete()},windowOptions:void 0};"dropbox"===e?n.windowOptions="width=600,height=800":"instagram"===e?n.windowOptions=o.default.getWindowOptions(580,580):"etsy"===e?n.windowOptions=o.default.getWindowOptions(580,775):"youtube"===e&&(n.windowOptions=o.default.getWindowOptions(605,640)),this._externalConnectNetwork(e,t,n,i)}else{const i={network:e};this._internalConnectNetwork(t,i,s)}}updateConnectStatus(){const e={user_id:this.getUserId(),username:this.getUsername(),field_set_key:"social_connect"};this.invalidateResource("UserResource",e);a.ZP.create("UserResource",e).callGet()}_externalConnectNetwork(e,t,s,i){t?v.instance().connect({network:e,options:s,i18n:i,requestContext:this.requestContext,viewer:this.viewer}):s.success&&s.success({})}_internalConnectNetwork(e,t,s){const i=a.ZP.create("UserSocialNetworkResource",t);(e?i.callCreate():i.callDelete()).then((e=>{this.updateConnectStatus(),s.success&&s.success(e)}),(e=>{s.error&&e instanceof Object&&s.error(e)})).finally((()=>{s.complete&&s.complete()}))}_getResourceNameForNetworkFriends(e){let t=null;switch(e){case z.vq:t="UserFacebookFriendsResource";break;case z.Ib:t="UserTwitterFriendsResource";break;case z.Tr:t="UserGmailFriendsResource";break;case z.lA:t="UserMicrosoftFriendsResource";break;default:return}return t}pollForFriends(e,t){const s=(t=t||{}).resourceOptions||{},i=this._getResourceNameForNetworkFriends(e);if(!i)return;const n=a.ZP.create(i,s);n.callGet({showError:!1}).then((()=>{const e=t.success;e&&e(n)}),(s=>{if(110===s.api_error_code)setTimeout((()=>{this.pollForFriends(e,t)}),1e3);else{const e=t.error;e&&e()}}))}}function I(){const e=(0,n.useDispatch)(),t=(0,k.B)(),s=(0,C.Z)();return(0,i.useMemo)((()=>new A({invalidateResource:(t,s)=>e((0,P.jB)(t,s)),requestContext:t,viewer:s})),[e,t,s])}},31149:(e,t,s)=>{s.d(t,{Z:()=>n});var i=s(785893);function n({size:e=56}){return(0,i.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,i.jsx)("rect",{width:"56",height:"56",rx:"28",fill:"#EFEFEF"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.1106 19.6408C18.2759 19.551 18.4653 19.5 18.6667 19.5H37.3333C37.5535 19.5 37.7594 19.561 37.9351 19.667C37.9351 19.667 37.9352 19.667 37.9352 19.667L28.7395 27.2024C28.3095 27.5547 27.6905 27.5547 27.2605 27.2024L18.0648 19.667C18.0799 19.6579 18.0951 19.6492 18.1106 19.6408ZM14 20.8611V20.6667C14 18.0893 16.0893 16 18.6667 16H37.3333C39.9107 16 42 18.0893 42 20.6667V20.8611V34.6667C42 37.244 39.9107 39.3333 37.3333 39.3333H18.6667C16.0893 39.3333 14 37.244 14 34.6667V20.8611ZM38.5 23.7292V34.6667C38.5 35.311 37.9777 35.8333 37.3333 35.8333H18.6667C18.0223 35.8333 17.5 35.311 17.5 34.6667V23.7292L25.0422 29.9095C26.7622 31.319 29.2378 31.319 30.9578 29.9096L38.5 23.7292Z",fill:"black"})]})}},659522:(e,t,s)=>{s.d(t,{Z:()=>n});var i=s(785893);function n({size:e=56}){return(0,i.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,i.jsx)("path",{d:"M56 28C56 12.536 43.464 0 28 0S0 12.536 0 28c0 13.975 10.24 25.56 23.625 27.66V36.094h-7.11V28h7.11v-6.169c0-7.017 4.18-10.893 10.576-10.893 3.064 0 6.268.546 6.268.546v6.891h-3.53c-3.479 0-4.564 2.159-4.564 4.373V28h7.766l-1.242 8.094h-6.524V55.66C45.761 53.56 56 41.975 56 28Z",fill:"#1877F2"}),(0,i.jsx)("path",{d:"M38.9 36.094 40.14 28h-7.765v-5.252c0-2.215 1.085-4.373 4.563-4.373h3.53v-6.89s-3.203-.547-6.267-.547c-6.396 0-10.576 3.876-10.576 10.893V28h-7.11v8.094h7.11V55.66a28.206 28.206 0 0 0 8.75 0V36.094h6.524Z",fill:"#fff"})]})}},331744:(e,t,s)=>{s.d(t,{Z:()=>n});var i=s(785893);function n({size:e=56}){return(0,i.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,i.jsx)("path",{d:"M28 56c15.464 0 28-12.536 28-28S43.464 0 28 0 0 12.536 0 28s12.536 28 28 28Z",fill:"#00B900"}),(0,i.jsx)("path",{d:"M46.625 26.32c0-8.335-8.354-15.115-18.625-15.115-10.267 0-18.625 6.78-18.625 15.115 0 7.471 6.627 13.73 15.578 14.91.606.13 1.432.401 1.642.92.187.47.122 1.208.06 1.684l-.265 1.596c-.08.471-.373 1.843 1.615 1.003 1.988-.835 10.724-6.314 14.634-10.812 2.693-2.964 3.986-5.969 3.986-9.3Z",fill:"#fff"}),(0,i.jsx)("path",{d:"M24.215 22.293H22.91c-.201 0-.364.163-.364.364v8.115c0 .2.163.364.364.364h1.306c.2 0 .364-.163.364-.364v-8.12a.363.363 0 0 0-.364-.36ZM33.208 22.293H31.9c-.2 0-.364.163-.364.364v4.82l-3.72-5.02c-.009-.015-.018-.024-.027-.038l-.005-.005-.023-.023c-.005 0-.005-.005-.005-.005-.005-.005-.014-.01-.019-.014l-.009-.01c-.005-.004-.014-.008-.019-.013-.004-.005-.009-.005-.009-.005a.036.036 0 0 0-.019-.01c-.004 0-.009-.004-.009-.004-.005-.004-.014-.004-.019-.01-.004 0-.009-.004-.014-.004l-.023-.01c-.005 0-.01 0-.014-.004-.01 0-.014-.005-.019-.005h-.014c-.004 0-.014 0-.018-.004H26.212c-.2 0-.364.163-.364.364v8.115c0 .2.164.364.364.364h1.307c.2 0 .364-.163.364-.364v-4.82l3.724 5.03a.283.283 0 0 0 .093.089s.005 0 .005.005c.01.004.014.009.023.014.005 0 .005.004.01.004.004.005.01.005.018.01.005.004.01.004.02.009.004 0 .008.005.008.005.01.004.02.004.024.009h.004c.028.01.061.014.094.014h1.306c.201 0 .364-.163.364-.364v-8.125a.37.37 0 0 0-.368-.36ZM21.065 29.097h-3.551v-6.445c0-.2-.164-.364-.364-.364h-1.307c-.2 0-.364.163-.364.364v8.115c0 .098.037.187.103.252l.004.005.005.005c.065.06.154.102.252.102h5.217c.201 0 .364-.163.364-.364v-1.306a.358.358 0 0 0-.359-.364ZM40.422 24.323c.201 0 .364-.163.364-.364v-1.307c0-.2-.163-.364-.364-.364h-5.217a.353.353 0 0 0-.252.103l-.005.005c0 .004-.004.004-.004.004a.373.373 0 0 0-.103.252v8.115c0 .098.037.187.103.252l.004.005.005.005c.065.06.154.102.252.102h5.217c.201 0 .364-.163.364-.364v-1.306c0-.2-.163-.364-.364-.364h-3.55v-1.372h3.55c.201 0 .364-.164.364-.364v-1.307c0-.2-.163-.364-.364-.364h-3.55v-1.372h3.55v.005Z",fill:"#00B900"})]})}},464240:(e,t,s)=>{s.d(t,{Z:()=>n});var i=s(785893);function n({size:e=56}){return(0,i.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,i.jsx)("rect",{width:"56",height:"56",rx:"28",fill:"#1DA1F2"}),(0,i.jsx)("path",{d:"M24.34 42c11.37 0 17.591-9.429 17.591-17.591 0-.265 0-.53-.012-.796a12.596 12.596 0 0 0 3.087-3.207c-1.11.494-2.303.82-3.557.976a6.22 6.22 0 0 0 2.725-3.424 12.299 12.299 0 0 1-3.93 1.495 6.17 6.17 0 0 0-4.51-1.953 6.19 6.19 0 0 0-6.186 6.185c0 .483.06.953.157 1.411-5.136-.253-9.694-2.725-12.744-6.463a6.184 6.184 0 0 0-.832 3.111 6.2 6.2 0 0 0 2.749 5.148 6.254 6.254 0 0 1-2.797-.771v.084a6.196 6.196 0 0 0 4.955 6.065 6.028 6.028 0 0 1-1.628.217c-.397 0-.783-.036-1.157-.109a6.182 6.182 0 0 0 5.775 4.293 12.4 12.4 0 0 1-7.68 2.652c-.494 0-.989-.024-1.471-.084A17.587 17.587 0 0 0 24.34 42Z",fill:"#fff"})]})}},22641:(e,t,s)=>{s.d(t,{Z:()=>n});var i=s(785893);function n({size:e=56}){return(0,i.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,i.jsx)("rect",{width:"56",height:"56",rx:"28",fill:"#25D366"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M39.206 16.65A15.75 15.75 0 0 0 27.99 12c-8.74 0-15.854 7.113-15.857 15.855a15.821 15.821 0 0 0 2.117 7.927L12 44l8.406-2.205a15.837 15.837 0 0 0 7.577 1.93h.007c8.74 0 15.853-7.114 15.856-15.857a15.76 15.76 0 0 0-4.64-11.218ZM27.99 41.047h-.005c-2.365 0-4.684-.636-6.708-1.837l-.482-.286-4.988 1.309 1.331-4.864-.313-.499a13.146 13.146 0 0 1-2.015-7.014c.003-7.266 5.915-13.178 13.185-13.178a13.09 13.09 0 0 1 9.318 3.865 13.098 13.098 0 0 1 3.856 9.324c-.003 7.267-5.915 13.18-13.179 13.18Zm7.23-9.871c-.397-.199-2.345-1.157-2.708-1.289-.364-.132-.628-.198-.891.198-.264.397-1.024 1.29-1.255 1.554-.231.264-.462.297-.858.099-.396-.199-1.673-.617-3.187-1.966-1.178-1.051-1.973-2.348-2.204-2.745-.231-.397-.024-.611.173-.808.178-.178.397-.463.595-.695.198-.23.264-.396.396-.66.132-.265.066-.496-.033-.695-.098-.198-.89-2.148-1.221-2.941-.322-.773-.649-.668-.892-.68a16.01 16.01 0 0 0-.759-.014c-.264 0-.693.099-1.057.495-.363.397-1.387 1.356-1.387 3.305 0 1.95 1.42 3.835 1.618 4.1.199.264 2.794 4.265 6.769 5.982.945.409 1.683.653 2.259.835.948.302 1.812.26 2.495.157.76-.114 2.344-.958 2.674-1.884.33-.925.33-1.719.23-1.884-.098-.166-.362-.266-.758-.464Z",fill:"#fff"})]})}},160585:(e,t,s)=>{function i(e=5){const t="abcdefghijklmnopqrstuvwxyz1234567890";return new Array(e).fill("").map((()=>t[Math.floor(Math.random()*t.length)])).join("")}s.d(t,{Z:()=>i})},482981:(e,t,s)=>{s.d(t,{Z:()=>n});var i=s(784641);function n(e){const{article_creator_user:t,display_type:s,feed_source:n,header_pin_id:o,id:a,title:r,video_pin:l}=e;switch(s){case 0:case 1:return r?(0,i.T7)(n,r,a):"";case 8:return null!=t&&t.username?`/${encodeURIComponent(t.username)}/`:"";case 3:case 6:return o?`/pin/${o}/`:"";case 2:return null!=l&&l.id?`/pin/${l.id}/`:"";default:return""}}},207112:(e,t,s)=>{s.d(t,{Z:()=>r});var i=s(667294),n=s(883119),o=s(785893);class a extends i.Component{constructor(e){var t,s,n;super(e),n={manualTruncate:!1},(s="state")in(t=this)?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,this.ref=(0,i.createRef)()}componentDidMount(){const{maxHeightPx:e,shaveOptions:t={}}=this.props,i=this.ref&&this.ref.current;if(!i)return;const n=void 0===i.textContent?"innerText":"textContent",o=i[n];("boolean"!=typeof t.spaces||t.spaces?o.split(" "):o).length<2?this.setState({manualTruncate:!0}):s.e(14118).then(s.bind(s,448433)).then((({default:s})=>{s(i,e,t)}))}render(){const{maxWidthPx:e,maxHeightPx:t,inline:s=!1}=this.props,{manualTruncate:i}=this.state,a={maxWidth:e,maxHeight:t},r=s?{display:"inline",...a}:{...a};return i?(0,o.jsx)(n.xu,{overflow:"hidden",dangerouslySetInlineStyle:{__style:r},ref:this.ref,children:this.props.children}):(0,o.jsx)(n.xu,{ref:this.ref,dangerouslySetInlineStyle:{__style:r},children:this.props.children})}}const r=a},758523:(e,t,s)=>{s.d(t,{$:()=>o,B:()=>n});var i=s(425288);const{Provider:n,useHook:o}=(0,i.Z)("SurfaceContext",{surface:"Unknown"})},812446:(e,t,s)=>{s.d(t,{Z:()=>r});var i=s(545846),n=s(112690),o=s(862624),a=s(785893);function r(e){return t=>{const{checkExperiment:s}=(0,o.Y)(),r=s("web_share_sheet_redesign",{dangerouslySkipActivation:!0}).anyEnabled,l=(0,n.Z)();return(0,a.jsx)(i.Z,{ref:t.shareButtonRef,Subject:e,inShareSheetRedesignExp:r,logContextEvent:l,...t})}}},545846:(e,t,s)=>{s.d(t,{Z:()=>p});var i=s(667294),n=s(482981),o=s(407629),a=s(121151),r=s(837727),l=s(946984),c=s(883119),d=s(785893);function h(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const _=new c.Ry(1),u=({children:e})=>e((0,l.Z)({shouldStopEventPropagation:!1}));class p extends i.Component{constructor(...e){super(...e),h(this,"handleDismiss",(()=>{const{onFlyoutDismiss:e}=this.props;e()})),h(this,"onHide",(()=>{this.props.onClick(),this.handleDismiss()})),h(this,"flyoutProps",(()=>{var e;const{gridDescription:t,idealDirection:s,imageSrc:i,pinId:a,userId:l,board:c,sendType:h,url:_,fullName:u,profileUrl:p,viewParameter:g,viewType:x,onExternalSend:m,showCaret:f,todayArticle:w,ownerId:b}=this.props;let j={description:t,id:a,imageUrl:i,name:"",type:r.d.PIN,url:`/pin/${a}/`,ownerId:b},y=r.d.PIN;switch(h){case"user":j={description:t,id:l,imageUrl:i,name:u,type:r.d.PINNER,url:p},y=r.d.USER;break;case"board":j=c&&{description:c.description,id:c.id,imageUrl:c.imageUrl,name:c.name,type:r.d.BOARD,url:c.url,ownerId:null===(e=c.owner)||void 0===e?void 0:e.id},y=r.d.BOARD;break;case"today_article":j=w&&{description:w.subtitle||"",id:w.id,imageUrl:i,name:w.title,type:r.d.TODAY_ARTICLE,url:(0,n.Z)(w)},y=r.d.TODAY_ARTICLE;break;case"search":j={...j,type:r.d.SEARCH,url:_},y=r.d.SEARCH}const S={onHide:this.onHide,onExternalSend:m,sendType:y,sharedObject:j,viewParameter:g,viewType:x};return{anchor:this.flyoutAnchor,idealDirection:s,onDismiss:this.handleDismiss,showCaret:f,children:(0,d.jsx)(o.default,{...S})}}))}toggle(){const{isOwnProfile:e,onToggleFlyout:t,sendType:s,userId:i,logContextEvent:n}=this.props;"user"===s&&n({event_type:101,component:13675,element:1079,object_id_str:i,view_type:4,view_parameter:e?3106:3107}),t()}render(){const{Subject:e,inShareSheetRedesignExp:t,inModal:s,isFlyoutOpen:i,shownWithinMasonry:n,shownWithinProfileHeader:o}=this.props,{anchor:r,idealDirection:l,onDismiss:h,showCaret:p,children:g}=this.flyoutProps();return(0,d.jsxs)(c.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},children:[(0,d.jsx)(c.xu,{ref:e=>{e&&(this.flyoutAnchor=e)},children:(0,d.jsx)(u,{children:t=>(0,d.jsx)(e,{handleSendShareFlyoutButtonClick:t((e=>{null!=e&&e.stopPropagation&&e.stopPropagation(),this.toggle()})),...this.props})})}),i&&(n||o?(0,d.jsx)(c.mh,{zIndex:o?_:void 0,children:(0,d.jsx)(c.xu,{zIndex:s?a.b7:void 0,position:s?"absolute":void 0,top:!!s||void 0,children:(0,d.jsx)(c.J2,{anchor:r,idealDirection:l,onDismiss:h,showCaret:p,size:t?"flexible":"xl",positionRelativeToAnchor:!1,children:g})})}):(0,d.jsx)(c.J2,{anchor:r,idealDirection:l,onDismiss:h,showCaret:p,size:t?"flexible":"xl",children:g}))]})}}h(p,"defaultProps",{idealDirection:"down",onClick:()=>{}})},655747:(e,t,s)=>{s.d(t,{Z:()=>c,j:()=>l});var i=s(898781),n=s(349700),o=s(862624),a=s(883119),r=s(785893);const l=[0,2,3];function c({hasAffiliateProducts:e,href:t,isPromoted:s,onNavigateSponsorClick:c,sponsorName:d,sponsorshipStatus:h,textWeight:_="bold"}){const u=(0,i.ZP)(),p=(0,o.Y)().checkExperiment("mweb_web_android_ios_clbc_eu_ad_string").anyEnabled,g=(0,o.Y)().checkExperiment("web_remove_paid_partnership_in_rejected_state").anyEnabled,x=d?(0,r.jsx)(a.rU,{href:t||`/${d}/`,onClick:c,children:(0,r.jsx)(a.xv,{weight:_,size:"200",children:d})},d):void 0;let m;s?m=(0,n.nk)(u._('Promoted by {{ name }}', 'sponsorship.sponsorshipText.promotedByBrand', 'indicating the username of the person who promoted the pin'),{name:x}):h||0===h?d&&!l.includes(h)?m=(0,n.nk)(u._('Paid partnership with {{ name }}', 'closeup.creator.sponsoredPinTitle', 'Subtext of closeup creator card when sponsored by a brand'),{name:x}):g&&2===h||(m=u._('Paid partnership', 'closeup.creator.sponsoredPinTitle', 'Subtext of closeup creator card when the pin is sponsored but the sponsorship status is rejected/requested/unaffiliated')):e&&(m=u._('Includes sponsored products', 'sponsorship.sponsorshipText.affiliatedProducts', 'Subtext of pincard attribution for a pin with affiliated products'));const f=p&&!s?"Ad â€¢ ":"";return(0,r.jsxs)(a.xv,{inline:!0,size:"200",lineClamp:2,children:[f,m]})}},499155:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var i=s(667294),n=s(898781),o=s(883119),a=s(785893);function r({size:e,iconColor:t,backgroundColor:s,disabled:i,onClick:r}){const l=(0,n.ZP)(),c=48===e?"lg":"xl";return(0,a.jsx)(o.hU,{accessibilityLabel:l._('Copy Link', 'shareMenu.icon.accessibilityLabel.copy', 'button to let users copy link directly'),bgColor:s,icon:"link",iconColor:t,size:c,disabled:i,onClick:r})}var l=s(239324),c=s(518604),d=s(499128),h=s(53987),_=s(862624),u=s(925927),p=s(343341),g=s(580744);function x({backgroundColor:e,iconColor:t,iconSize:s,iconWrapperWidth:x,isCloseupActionBar:m,marginEnd:f,sharedObject:w,spaceBelowIcon:b}){const j=(0,n.ZP)(),y=(0,p.F9)(),[S,v]=(0,i.useState)(""),[C,P]=(0,i.useState)(!1),[k,z]=(0,i.useState)(!1),A=(0,u.TH)(),I=j._('Link copied!', 'shareSheet.socialBar.copyLinkButton.LinkCopied', 'Notification link was copied to clipboard'),Z=e=>{m?navigator.clipboard.writeText(e).then((()=>{var e;e=j._('Copied link to your clipboard to share', 'web.unauth.pinbar.copylink', 'Message to indicate link has been copied'),y.showToast((({hideToast:t})=>(0,a.jsx)(o.xu,{top:!0,children:(0,a.jsx)(d.ZP,{duration:3e3,onHide:t,text:e})})))})):navigator.clipboard.writeText(e).then((()=>{z(!0),setTimeout((()=>{z(!1)}),3e3)}))},E=async()=>{if(S)return void Z(S);P(!0);const e={invite_category:3,invite_channel:12,object_type:w.type,object_id:w.id,name:w.name,description:w.description||"",path:w.url,picture:w.imageUrl};g.Z.createShareInviteData(e).then((t=>{const{invite_url:s}=t;P(!1),s&&(v(s),g.Z.logShareInvite(e,t),Z(s))}))},O=()=>{E()},{checkExperiment:L}=(0,_.Y)();return(0,h.am)(A)&&m&&L("web_copy_link_btn_replace").anyEnabled?(0,a.jsx)(o.xu,{marginStart:1,children:(0,a.jsx)(o.zx,{accessibilityLabel:j._('Copy link', 'shareSheet.socialBar.copyLinkButton.CopyLink', 'Copy Pin URL to clipboard'),text:j._('Copy link', 'shareSheet.socialBar.copyLinkButton.CopyLink', 'Copy Pin URL to clipboard'),onClick:()=>O(),size:"lg",color:"gray",fullWidth:!0})}):(0,a.jsxs)(c.Z,{width:x||s,marginEnd:f||!1,children:[(0,a.jsx)(o.xu,{alignItems:m?"center":"stretch",display:m?"flex":"block",marginBottom:b,width:m?"100%":"auto",children:(0,a.jsx)(o.kC,{alignItems:"center",direction:"column",justifyContent:"center",width:s,children:(0,a.jsx)(r,{backgroundColor:e,iconColor:t,size:s,onClick:O,disabled:C})})}),!m&&(0,a.jsx)(l.Z,{text:k?I:j._('Copy link', 'shareSheet.socialBar.copyLinkButton.CopyLink', 'Copy Pin URL to clipboard')})]})}},211967:(e,t,s)=>{s.d(t,{Z:()=>c});var i=s(172071),n=s(6637),o=s(898781),a=s(407043),r=s(883119),l=s(785893);function c(e){const{logContextEvent:t}=(0,a.v)(),s=(0,o.ZP)(),{identifier:c,onUndoHide:d,isGroupChat:h}=e,_=async()=>{const s=n.ZP.create("ShareSuggestionsHideResource",{user_identifier:c});await s.callDelete(),d(),(()=>{const{component:s,element:n}=e;t({event_type:101,component:s,element:n}),i.Z.increment("web_contacts.suggestions.undo_hide",1,{surface:s})})()};return(0,l.jsxs)(r.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,l.jsx)(r.kC,{alignItems:"center",flex:"grow",height:"100%",justifyContent:"start",width:"80%",children:(0,l.jsx)(r.xv,{inline:!0,color:"subtle",children:h?s._('Ok! We won\'t suggest this group again.', 'SendObject.SendObjectSuggestionItem.HideContactBanner', 'Warning message after user hide a contact'):s._('Ok! We won\'t suggest this contact again.', 'SendObject.SendObjectSuggestionItem.HideContactBanner', 'Warning message after user hide a contact')})}),(0,l.jsx)(r.kC,{alignItems:"center",flex:"none",justifyContent:"end",children:(0,l.jsx)(r.zx,{onClick:({event:e})=>{e.stopPropagation(),_()},text:s._('Undo', 'SendObject.SendObjectSuggestionItem.HideContactUndoButton', 'Undo button after user hide a contact'),size:"lg",type:"button"})})]})}},779324:(e,t,s)=>{s.d(t,{Z:()=>c});var i=s(172071),n=s(6637),o=s(898781),a=s(883119),r=s(407043),l=s(785893);function c(e){const{logContextEvent:t}=(0,r.v)(),s=(0,o.ZP)(),{identifier:c,onHide:d}=e,h=()=>{n.ZP.create("ShareSuggestionsHideResource",{user_identifier:c}).callCreate().then((()=>{d(),(()=>{const{component:s,element:n}=e;t({event_type:101,component:s,element:n}),i.Z.increment("web_contacts.suggestions.hide",1,{surface:s})})()}))};return(0,l.jsx)(a.hU,{icon:"cancel",iconColor:"darkGray",onClick:({event:e})=>{e.stopPropagation(),h()},accessibilityLabel:s._('Remove contact', 'SendObject.SendObjectSuggestionItem', 'accessibility label for removing contact suggestion'),size:"xs"})}},407629:(e,t,s)=>{s.r(t),s.d(t,{default:()=>be});var i=s(667294),n=s(116303),o=s(898781),a=s(934523),r=s(349700),l=s(407043);const c=56;var d=s(883119),h=s(785893);function _({idx:e,item:t,onSendMessage:s,onViewConversation:_,sentHistory:u}){var p;const g=(0,o.ZP)(),{logContextEvent:x}=(0,l.v)(),[m,f]=(0,i.useState)(!1),w=t.id||"string"==typeof t.email&&t.email||"",b=Object.prototype.hasOwnProperty.call(u,w),j=null!==(p=u[w])&&void 0!==p?p:"";let y="";"string"!=typeof t.full_name||t.full_name.match(/^\s*$/)?"string"!=typeof t.email||t.email.match(/^\s*$/)||(y=t.email):y=t.full_name;let S="";b?S=g._('View chat', 'shareSheet.ContactItem.viewChat', 'View current chat'):m&&(S=g._('Sent', 'shareSheet.ContactItem.sent', 'Item has been sent to contact'));return(0,h.jsx)(d.xu,{alignItems:"center","data-test-id":"sharesheet-contact-item",display:"flex",direction:"column",width:86,children:(0,h.jsx)(d.xu,{"data-test-id":m?"sharesheet-viewchat-link":"sharesheet-contact-item-button",display:"inlineBlock",role:"button",children:(0,h.jsxs)(d.iP,{onTap:b?()=>_(j):()=>{x({event_type:101,component:13029,element:1039,aux_data:{result_index:e+1,rs:t.debug_reason.reason}}),f(!0),s(t)},children:[(0,h.jsxs)(d.xu,{alignItems:"center",display:"flex",height:c,justifyContent:"center",marginBottom:2,width:c,children:[m&&(0,h.jsx)(d.xu,{alignItems:"center",color:"transparentDarkGray",display:"flex",height:c,justifyContent:"center",position:"absolute",rounding:"circle",width:c,zIndex:new d.Ry(a.fe),children:(0,h.jsx)(d.JO,{accessibilityLabel:(0,r.Wc)(g._('Sent to {{recipientName}}', 'shareSheet.ContactItem.sentIcon.accessibilityLabel', 'Accessibility label for sent icon over user avatar, recipientName: message recipient'),{recipientName:y}),icon:"check",color:"light",size:24})}),(0,h.jsx)(n.Z,{size:"fit",src:t.image_large_url,name:y})]}),(0,h.jsxs)(d.xu,{width:c,children:[(0,h.jsx)(d.xv,{lineClamp:1,size:"100",align:"center",children:y}),(0,h.jsx)(d.xv,{color:"subtle",size:"100",align:"center",children:S})]})]})})})}var u=s(784590),p=s(479301),g=s(711108);function x(e){var t;const{logContextEvent:s}=(0,l.v)(),n=(0,o.ZP)(),{onHide:a,onSendMessage:r,onShowImportContacts:x,objectAttachment:m,sentHistory:f}=e,{isLoaded:w}=(0,u.Z)({name:"ShareSuggestionsResource",options:{field_set_key:"default"},noCache:!0}),{shareSuggestions:b}=(0,g.E)(),j=(null===(t=b[""])||void 0===t?void 0:t.slice(0,5))||[],y=j.length>0;(0,i.useEffect)((()=>{if(w){s({event_type:y?7511:7512,component:56,view_type:70,view_parameter:256})}}),[y,s,w]);const{dropdownOpen:S,conversationOpen:v,newMessageOpen:C}=(0,p.Z5)(),P=e=>{v(e),S(),a()},k=j.map(((e,t)=>{const s=`${e.id||e.email||t}`,i={item:e,idx:t,onSendMessage:r,onViewConversation:P,sentHistory:f};return(0,h.jsx)(_,{...i},s)})),z=!y&&!w;return(0,h.jsxs)(d.kC,{direction:"column",children:[(0,h.jsx)(d.kC,{alignItems:"center",height:64,justifyContent:"center",children:(0,h.jsx)(d.xv,{align:"center",size:"300",weight:"bold",children:n._('Send on Pinterest', 'ContactsSuggestions.Header.text', 'Header for contact suggestion section of the share menu')})}),(0,h.jsx)(d.xu,{display:"flex",height:98,justifyContent:z?"center":void 0,marginBottom:5,children:z?(0,h.jsx)(d.xu,{paddingY:2,children:(0,h.jsx)(d.$j,{accessibilityLabel:n._('Loading Conversation Messages', 'SendObject.contactList.spinner', 'Spinner that indicates then the contact list is being loaded'),show:!0})}):(0,h.jsxs)(d.kC,{direction:"row",children:[(0,h.jsxs)(d.kC,{alignItems:"center",direction:"column",justifyContent:"start",width:86,children:[(0,h.jsx)(d.xu,{height:c,marginBottom:2,width:c,children:(0,h.jsx)(d.hU,{accessibilityLabel:n._('Search for users', 'ContactsSuggestsions.SearchIcon.accessibilityLabel', 'Accessibility label for search icon in Contacts Suggestions list'),bgColor:"lightGray",icon:"search",iconColor:"darkGray",onClick:()=>{C(m),S(),a()},size:"xl"})}),(0,h.jsx)(d.xv,{lineClamp:1,size:"100",children:n._('Search', 'ContactsSuggestions.SearchOption.text', 'Label for search icon in Contacts Suggestions list')})]}),y?k:(0,h.jsxs)(d.kC,{alignItems:"center",direction:"column",justifyContent:"start",width:86,children:[(0,h.jsx)(d.xu,{height:c,marginBottom:2,width:c,children:(0,h.jsx)(d.hU,{accessibilityLabel:n._('Search for users', 'ContactsSuggestsions.SearchIcon.accessibilityLabel', 'Accessibility label for search icon in Contacts Suggestions list'),bgColor:"lightGray",icon:"people",iconColor:"darkGray",onClick:x,size:"xl"})}),(0,h.jsx)(d.xv,{lineClamp:1,size:"100",children:n._('Import', 'ContactsSuggestions.ImportOption.text', 'Label for import contacts icon in Contacts Suggestions list')})]})]})})]})}function m(e){switch(e){case"AuthHomefeed":return 13;case"BaseBoardPinGrid":return 5;case"BoardMoreIdeasTabContent":return 23;case"ConversationView":return 19;case"FollowingFeedGrid":return 21;case"ProfilePromotablePinCard":return 1;case"RelatedPinGrid":case"RelatedProductsFeed":return 14;case"RelatedProductsExploreTab":return 4;case"ShoppingPackageItem":case"ShoppingSquareGridPdp":case"ShoppingGridShippedMetadata":case"ProductPinsFeed":return 27;case"StoryPinFeedGrid":return 28;case"TodayArticleFeed":return 20;case"UserProfilePinGrid":default:return e}}const f=e=>{const{size:t,name:s,textLayout:i}=e,n=`calc(${Math.sin((o=45,o*(Math.PI/180)))} * (${t}) / 2)`;var o;const a=(0,h.jsx)(d.qE,{name:s?[...s][0].toUpperCase():""});switch(i){case"bottomLeft":return(0,h.jsx)(d.xu,{"aria-label":s,color:"secondary",height:"100%",display:"flex",alignItems:"end",dangerouslySetInlineStyle:{__style:{paddingBottom:n,paddingRight:n}},children:a});case"topLeft":return(0,h.jsx)(d.xu,{"aria-label":s,color:"secondary",height:"100%",display:"flex",alignItems:"start",dangerouslySetInlineStyle:{__style:{paddingTop:n,paddingRight:n}},children:a});default:return(0,h.jsx)(d.xu,{"aria-label":s,color:"secondary",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",children:a})}};function w(e){const{collaborators:t,outline:s=!1,size:i="fit"}=e,{colorGray0:n,colorGray100:o}=(0,d.tv)(),a="fit"===i?"100%":32,r="fit"===i?"":32,l=((e,t)=>{switch(e){case 0:case 1:return[{top:0,left:0,width:t,height:t,textLayout:"center"}];case 2:return[{top:0,left:0,width:"calc(50% - 1px)",height:t,textLayout:"center"},{top:0,left:"calc(50% + 1px)",width:"calc(50% - 1px)",height:t,textLayout:"center"}];default:return[{top:0,left:0,width:"calc(50% - 1px)",height:t,textLayout:"center"},{top:0,left:"calc(50% + 1px)",width:"calc(50%)",height:"calc(50% - 1px)",textLayout:"topLeft"},{top:"calc(50% + 1px)",left:"calc(50% + 1px)",width:"calc(50%)",height:"calc(50% - 1px)",textLayout:"bottomLeft"}]}})(t.length,a).map(((e,s)=>[e,t[s]]));return(0,h.jsxs)(d.xu,{color:"default",overflow:"hidden",rounding:"circle",width:a,height:r,position:"relative",dangerouslySetInlineStyle:{__style:{...s?{boxShadow:`0 0 0 2px ${n}`}:{},willChange:"transform"}},children:[(0,h.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:"100%"}}}),l.map((([e,t={name:"",src:void 0}],s)=>{const{width:i,height:n,top:a,left:r,textLayout:l}=e,{name:c,src:_}=t;return(0,h.jsxs)(d.xu,{position:"absolute",width:i,height:n,dangerouslySetInlineStyle:{__style:{top:a,left:r}},children:[null!=_?(0,h.jsx)(d.Ee,{alt:c,color:o,src:_,naturalWidth:1,naturalHeight:1,fit:"cover"}):(0,h.jsx)(f,{name:c,textLayout:l,size:n}),(0,h.jsx)(d.xu,{position:"absolute",top:!0,bottom:!0,right:!0,left:!0,dangerouslySetInlineStyle:{__style:{background:"rgba(0, 0, 0, 0.03)","pointer-events":"none"}}})]},s)}))]})}var b=s(19121),j=s(837727);function y(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class S extends i.Component{constructor(...e){super(...e),y(this,"state",{textValue:this.props.initialTextValue||""}),y(this,"handleSendMessage",(()=>{this.props.onSendMessage(this.props.recipient,this.state.textValue)})),y(this,"handleTextValueChange",(({value:e})=>{this.setState({textValue:e})}))}render(){const{onCancelDraft:e,viewerId:t}=this.props,s=this.props.recipient||{},i="conversation_share_suggestion"===s.type,o=i?(s.users||[]).filter((e=>e.id!==t)):[];return(0,h.jsxs)(d.xu,{paddingX:4,width:360,children:[(0,h.jsxs)(d.xu,{alignItems:"center",display:"flex",paddingY:4,children:[(0,h.jsx)(d.xu,{height:48,paddingX:1,width:56,children:i?(0,h.jsx)(w,{collaborators:o.map((e=>({name:e.full_name||e.first_name,src:e.image_large_url})))}):(0,h.jsx)(n.Z,{name:s.full_name||s.email||" ",src:s.image_large_url})}),(0,h.jsxs)(d.xu,{flex:"grow",marginStart:1,children:[(0,h.jsx)(d.xv,{weight:"bold",children:i?o.map((e=>e.first_name||e.full_name)).join(", "):s.full_name||s.email}),(0,h.jsx)(d.xv,{color:"subtle",size:"100",children:i||s.username?s.username:this.props.i18n._('Invite by email', 'shareSheet.SendObjectDraft.inviteByEmailSubheader', 'Subheader shown when username is not avaible')})]}),(0,h.jsx)(d.hU,{accessibilityLabel:this.props.i18n._('Cancel share to user', 'shareSheet.SendObjectDraft.cancelButton', 'Accessibility label for close button'),icon:"cancel",iconColor:"darkGray",onClick:e,size:"sm"})]}),(0,h.jsxs)(d.xu,{children:[(0,h.jsx)(d.xu,{paddingX:1,children:(0,h.jsx)(d.Kx,{id:"sendObjectMessage",onChange:this.handleTextValueChange,placeholder:this.props.i18n._('Add a message', 'shareSheet.SendObjectDraft.textareaPlaceholder', 'Placeholder that tells user this is where they can add a messaage'),value:this.state.textValue||""})}),(0,h.jsx)(d.xu,{alignItems:"center",display:"flex",justifyContent:"center",paddingY:4,children:(0,h.jsx)(d.zx,{color:"red",onClick:this.handleSendMessage,size:"lg",text:this.props.i18n._('Send', 'shareSheet.SendObjectDraft.sendButton', 'Button that sends out to email'),type:"submit"})})]})]})}}function v(e){const t=(0,o.ZP)(),s=(0,b.Z)();return(0,h.jsx)(S,{...e,viewerId:s.isAuth?s.id:"",i18n:t})}var C=s(936776);function P(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class k extends i.Component{constructor(...e){super(...e),P(this,"state",{textValue:this.props.initialTextValue||"",emailValue:""}),P(this,"handleSendEmail",((e,t)=>{if(e){const s={type:"email_share_suggestion",id:"",email:e,debug_reason:{reason:"",readable_reason:""}};this.props.onSendMessage(s,t)}})),P(this,"handleTextValueChange",(({value:e})=>{this.setState({textValue:e})})),P(this,"handleEmailValueChange",(({value:e})=>{this.setState({emailValue:e})}))}renderCloseButton(){const{i18n:e,inShareSheetRedesignExp:t,onCancelDraft:s}=this.props;return(0,h.jsx)(d.hU,{accessibilityLabel:e._('Cancel share to user', 'accessibility label for close button', 'accessibility label for close button'),icon:t?"arrow-back":"cancel",onClick:s,size:"sm"})}render(){const{inShareSheetRedesignExp:e,width:t}=this.props;return(0,h.jsxs)(d.xu,{display:"flex",direction:"column",column:12,paddingX:4,paddingY:e?2:0,width:t,color:"default",children:[(0,h.jsxs)(d.xu,{display:"flex",alignItems:"center",paddingY:4,children:[e&&this.renderCloseButton(),(0,h.jsx)(d.xu,{flex:"grow",marginEnd:e?8:0,children:(0,h.jsx)(d.xv,{align:e?"center":void 0,weight:"bold",children:this.props.i18n._('Send to', 'shareSheet.SendToEmail.label', 'Send to label')})}),!e&&this.renderCloseButton()]}),(0,h.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,h.jsx)(d.xu,{paddingY:1,marginBottom:4,children:(0,h.jsx)(d.Kx,{id:"email",onChange:this.handleEmailValueChange,placeholder:this.props.i18n._('Enter email address', 'Email address to send to', 'Email address to send to'),value:this.state.emailValue||"",rows:1})}),(0,h.jsx)(d.Kx,{id:"sendObjectMessage",onChange:this.handleTextValueChange,placeholder:this.props.i18n._('Add a message', 'shareSheet.SendToEmail.textareaPlaceholder', 'Placeholder that tells user this is where they can add a messaage'),value:this.state.textValue||""}),(0,h.jsx)(d.xu,{paddingY:4,display:"flex",justifyContent:"center",children:(0,h.jsx)(d.zx,{size:"lg",color:"red",onClick:()=>this.handleSendEmail(this.state.emailValue||"",this.state.textValue||""),type:"submit",text:this.props.i18n._('Send', 'shareSheet.SendToEmail.sendButton', 'Button that sends out to email'),disabled:!(0,C.Z)(this.state.emailValue)})})]})]})}}function z(e){const t=(0,o.ZP)();return(0,h.jsx)(k,{...e,i18n:t})}function A({email:e,isValid:t,onClick:s,showSendEmailText:i}){const a=(0,o.ZP)(),l=t?a._('Click to send!', 'SendObject.sendToEmail.sendToSubheader', 'Subeader that indicates user to click in order to send an object'):a._('Keep typing!', 'SendObject.sendToEmail.sendToSubheader', 'Subeader that indicates user to keep typing until the email address is valid'),c=i?(0,r.nk)(a._('Email {{ email }}', 'SendObject.sendToEmail.sendToHeader', 'Header that indicates user the email address typed in the search field'),{email:e}):(0,r.nk)(a._('Invite {{ email }}', 'SendObject.sendToEmail.sendToHeader', 'Header that indicates user the search query typed in the search field'),{email:e});return(0,h.jsx)(d.xu,{marginBottom:4,children:(0,h.jsx)(d.iP,{onTap:()=>{t&&s()},children:(0,h.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,h.jsx)(d.xu,{height:48,width:48,children:(0,h.jsx)(n.Z,{name:e})}),(0,h.jsxs)(d.xu,{paddingX:3,display:"flex",justifyContent:"center",direction:"column",children:[(0,h.jsx)(d.xv,{weight:"bold",size:"300",children:c}),(0,h.jsx)(d.xv,{size:"100",color:"subtle",children:l})]})]})})})}var I=s(484131),Z=s(211967),E=s(779324),O=s(941646);function L(e){const t=(0,o.ZP)(),{shouldShowViewChat:s,isSent:i,onClickSend:n,onViewConversation:a}=e;return(0,h.jsx)(d.kC,{alignItems:"stretch",justifyContent:"start",children:s?(0,h.jsx)(d.iP,{mouseCursor:"pointer",onTap:({event:e})=>{e.stopPropagation(),a()},children:(0,h.jsxs)(d.xu,{alignItems:"center","data-test-id":"sharesheet-viewchat-link",display:"flex",children:[(0,h.jsx)(d.xv,{color:"default",size:"200",lineClamp:1,weight:"bold",children:t._('View chat', 'SendObject.contactList.viewChatLink', 'View chat with last sent item')}),(0,h.jsx)(d.xu,{marginStart:1,children:(0,h.jsx)(d.JO,{accessibilityLabel:t._('View chat forward icon', 'SendObject.contactList.viewChatLink', 'View chat with last sent item'),color:"default",icon:"arrow-forward",size:14})})]})}):(0,h.jsx)(O.Z,{id:i?"sharesheet-viewchat-link":"sharesheet-send-button",children:(0,h.jsx)(d.zx,{color:i?"gray":"red",disabled:i,onClick:n,size:"lg",text:i?t._('Sent', 'SendObject.LEGOSendObjectTypeahead', 'Pin is sent to current contact'):t._('Send', 'SendObject.LEGOSendObjectTypeahead', 'Send pin to current contact')})})})}function T(e){var t,s,o;const{logContextEvent:a}=(0,l.v)(),{item:r,textFieldValue:c,onSendMessage:_,onShowSendDraft:u,onViewConversation:p,sentHistory:g}=e,[x,m]=(0,i.useState)(!1),[f,j]=(0,i.useState)(!1),[y,S]=(0,i.useState)(!1),v=r.id||"string"==typeof r.email&&r.email||"",C=v in g,P=""!==c,k=null!==(t=g[v])&&void 0!==t?t:"",z=(0,b.Z)().id||"",A="conversation_share_suggestion"===r.type,O=A?(r.users||[]).filter((e=>e.id!==z)):[],T=r.debug_reason&&r.debug_reason.readable_reason;let B="";"string"!=typeof r.full_name||r.full_name.match(/^\s*$/)?"string"!=typeof r.email||r.email.match(/^\s*$/)||(B=r.email):B=r.full_name;return x?(0,h.jsx)(d.xu,{alignItems:"center",display:"flex",position:"relative",width:"100%",paddingY:2,children:(0,h.jsx)(Z.Z,{identifier:null!==(s=r.id)&&void 0!==s?s:r.email,onUndoHide:()=>m(!1),component:13029,element:11918,isGroupChat:O.length>1})}):(0,h.jsxs)(d.xu,{alignItems:"center","data-test-id":"sharesheet-contact-item",display:"flex",paddingY:2,position:"relative",width:"100%",children:[(0,h.jsx)(d.iP,{mouseCursor:"pointer",onTap:({event:e})=>{e.stopPropagation(),u(r)},children:(0,h.jsx)(d.Zb,{onMouseEnter:()=>{j(!(P||y&&C))},onMouseLeave:()=>j(!1),children:(0,h.jsxs)(d.kC,{alignItems:"center",justifyContent:"start",children:[(0,h.jsx)(d.xu,{height:48,width:48,children:A?(0,h.jsx)(w,{collaborators:O.map((e=>({name:e.full_name||e.first_name,src:e.image_medium_url})))}):(0,h.jsx)(n.Z,{accessibilityLabel:"",name:B,src:r.image_medium_url})}),(0,h.jsxs)(d.kC,{alignItems:"center",flex:"grow",height:"100%",justifyContent:"start",width:"100%",children:[(0,h.jsxs)(d.xu,{dangerouslySetInlineStyle:{__style:{paddingLeft:8,paddingRight:16}},flex:"grow",children:[(0,h.jsx)(d.xu,{marginBottom:1,children:(0,h.jsx)(d.xv,{color:"default",lineClamp:1,weight:"bold",children:A?O.map((e=>e.first_name||e.full_name)).join(", "):B})}),P&&T?(0,h.jsx)(d.xv,{color:"subtle",size:"100",children:T}):"string"==typeof r.username&&(0,h.jsx)(d.xv,{color:"subtle",size:"100",children:r.username})]}),(0,h.jsxs)(d.kC,{alignItems:"center",flex:"none",justifyContent:"end",children:[f&&(0,h.jsx)(d.xu,{display:"flex",marginEnd:2,children:(0,h.jsx)(E.Z,{identifier:null!==(o=r.id)&&void 0!==o?o:r.email,onHide:()=>m(!0),component:13029,element:11917})}),(0,h.jsx)(L,{shouldShowViewChat:C,isSent:y,onClickSend:({event:t})=>{t.stopPropagation(),(()=>{var t;const{idx:s}=e;a({event_type:101,component:13029,element:c?1044:1039,aux_data:{entered_query:c,result_index:s+1,rs:null===(t=r.debug_reason)||void 0===t?void 0:t.reason}})})(),S(!0),_(r),j(!1)},onViewConversation:()=>p(k)})]})]})]})})}),(0,h.jsx)(I.Z.Consumer,{children:e=>{var t;return e?(0,h.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none",backgroundColor:"rgba(255,255,255,0.5)"}},position:"absolute",right:!0,top:!0,children:(0,h.jsx)(d.X6,{color:"shopping",size:"400",children:null===(t=r.debug_reason)||void 0===t?void 0:t.reason})}):null}})]})}function B(e){const{logContextEvent:t}=(0,l.v)(),s=(0,o.ZP)(),{onChange:n,onSendMessage:a,onShowSendDraft:r,onShowImportContacts:c,sentHistory:_,value:x,paddingX:m}=e,{resourceName:f,resourceOptions:w}=x?{resourceName:"ShareSuggestionsTypeaheadResource",resourceOptions:{field_set_key:"default",term:x||"default"}}:{resourceName:"ShareSuggestionsResource",resourceOptions:{field_set_key:"default"}},{isLoaded:b}=(0,u.Z)({name:f,options:w,noCache:!0}),j=!x&&b,y=x&&b,{shareSuggestions:S}=(0,g.E)(),v=S[x]||[];(0,i.useEffect)((()=>{if(!x&&j){const e=v.length>0?7511:7512;t({event_type:e,component:56,view_type:70,view_parameter:256})}}),[j]);const{dropdownOpen:P,conversationOpen:k}=(0,p.Z5)(),z=e=>{k(e),P()},I=v.map(((e,t)=>{const s=`${t}-${x?"search":"suggestion"}`,i={item:e,idx:t,onSendMessage:a,onShowSendDraft:r,onViewConversation:z,sentHistory:_,textFieldValue:x};return(0,h.jsx)(T,{...i},s)})),Z=0===v.length&&(""===x&&!j||""!==x&&!y);return(0,h.jsxs)(d.xu,{children:[(0,h.jsx)(d.xu,{display:"flex",paddingX:m,position:"relative",children:(0,h.jsx)(d.xu,{"data-test-id":"sharesheet-search-user",width:"100%",children:(0,h.jsx)(d.Um,{accessibilityLabel:s._('Search for a name or email', 'SendObject.searchbar.accesibilityLabel', 'accessible label'),id:"search",onChange:n,placeholder:s._('Name or email', 'SendObject.searchbar.placeholder', 'Placeholder text on search bar for searching contacts on sharesheet'),size:"lg",value:x})})}),(0,h.jsx)(d.xu,{height:185,marginBottom:4,marginTop:2,zIndex:new d.Ry(1e3),dangerouslySetInlineStyle:{__style:{overflowY:"scroll",overflowX:"hidden"}},children:(0,h.jsxs)(d.xu,{paddingX:m,children:[(0,h.jsx)(d.xu,{paddingY:Z?2:0,children:(0,h.jsx)(d.$j,{accessibilityLabel:s._('Loading Conversation Messages', 'SendObject.contactList.spinner', 'Spinner that indicates then the contact list is being loaded'),show:Z})}),(0,h.jsxs)(d.xu,{children:[I,x&&(0,h.jsxs)(d.xu,{children:[(0,h.jsx)(d.Zb,{children:(0,h.jsx)(A,{email:x,isValid:(0,C.Z)(x),onClick:()=>r({email:x,full_name:x}),showSendEmailText:!1})}),!Z&&(0,h.jsx)(d.xu,{width:"100%",children:(0,h.jsx)(d.Zb,{children:(0,h.jsx)(d.iP,{onTap:c,children:(0,h.jsxs)(d.kC,{alignItems:"center",direction:"row",justifyContent:"start",children:[(0,h.jsx)(d.xu,{alignItems:"center",color:"secondary",display:"flex",height:48,justifyContent:"center",rounding:"circle",width:48,children:(0,h.jsx)(d.JO,{accessibilityLabel:"people",color:"default",icon:"people",size:24})}),(0,h.jsx)(d.xu,{paddingX:3,children:(0,h.jsx)(d.xv,{weight:"bold",children:s._('Choose from contacts', 'SendObject.typeahead.contactHeader', 'Header that indicates user to choose from contact list')})})]})})})})]})]})]})})]})}var R=s(567831),D=s(499155),M=s(31149),F=s(107193),H=s(659522),U=s(331744);function V({size:e=48}){return(0,h.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,h.jsx)("rect",{width:"56",height:"56",rx:"28",fill:"#fff"}),(0,h.jsx)("rect",{x:".5",y:".5",width:"55",height:"55",rx:"27.5",stroke:"#767676",strokeOpacity:".4"}),(0,h.jsx)("path",{d:"M39 19.5c0 1.381-1.119 2.5-2.5 2.5S34 20.881 34 19.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5ZM18.5 28c0-.69-.56-1.25-1.25-1.25S16 27.31 16 28s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25ZM26.75 38.75c0-.69.56-1.25 1.25-1.25s1.25.56 1.25 1.25S28.69 40 28 40s-1.25-.56-1.25-1.25Z",fill:"#E60023"}),(0,h.jsx)("path",{d:"M29.25 17.25c0 .69-.56 1.25-1.25 1.25s-1.25-.56-1.25-1.25S27.31 16 28 16s1.25.56 1.25 1.25ZM17 36.5c0-1.381 1.119-2.5 2.5-2.5s2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5-2.5-1.119-2.5-2.5ZM38.75 26.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25S40 28.69 40 28s-.56-1.25-1.25-1.25Z",fill:"#FFD63F"}),(0,h.jsx)("path",{d:"M19.5 22c1.381 0 2.5-1.119 2.5-2.5S20.881 17 19.5 17 17 18.119 17 19.5s1.119 2.5 2.5 2.5ZM36.5 34c-1.381 0-2.5 1.119-2.5 2.5s1.119 2.5 2.5 2.5 2.5-1.119 2.5-2.5-1.119-2.5-2.5-2.5Z",fill:"#46CC88"}),(0,h.jsx)("path",{d:"M28 21c-3.866 0-7 3.134-7 7s3.134 7 7 7 7-3.134 7-7-3.134-7-7-7Z",fill:"#3869FF"})]})}var N=s(239324),W=s(518604);function $({iconSize:e,iconWrapperWidth:t,marginBottom:s,marginEnd:i,onCreatePincodeClick:n,sharedObject:a}){const r=(0,o.ZP)(),l=(0,b.Z)();return n&&[j.d.BOARD,j.d.PINNER,j.d.USER].includes(a.type)&&l.isAuth&&(a.id===l.id||l.isEmployee)?(0,h.jsxs)(W.Z,{width:t,marginEnd:i,children:[(0,h.jsx)(d.xu,{marginBottom:s,children:(0,h.jsx)(d.iP,{fullWidth:!1,onTap:n,children:(0,h.jsx)(V,{size:e})})}),(0,h.jsx)(N.Z,{text:r._('Pincode', 'Share via pincode', 'Share via pincode')})]},"pincode"):null}var G=s(464240),Y=s(22641),X=s(780280),q=s(580744),J=s(343341);function K(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Q="darkGray",ee="lightGray",te={backgroundColor:"#ffffff",border:"none",padding:0},se=new Set(["JP","TW","TH"]),ie=(e,t)=>{(0,F.default)((t=>{t&&(t.getUserID()?e():t.login((()=>{e()})))}),t)};class ne extends i.Component{constructor(...e){super(...e),K(this,"state",{whatsappInviteData:null,inviteData:null,whatsappURL:"",whatsAppLogged:!1,copyLinkLogged:!1}),K(this,"logShareInviteLink",(()=>{const{copyLinkLogged:e,inviteData:t}=this.state,s=this.getShareOptions(12);e||(q.Z.logShareInvite(s,t),this.setState({copyLinkLogged:!0}))}))}componentDidMount(){this.getWhatsAppURL()}getShareOptions(e){const{sharedObject:t}=this.props;return{invite_category:t.type===j.d.SEARCH?10:3,invite_channel:e,object_type:t.type,object_id:t.id,name:t.name,description:t.description||"",path:t.url,picture:t.imageUrl}}getSendDisplayText(e){if(this.props.inShareSheetRedesignExp)return this.props.i18n._('Share to', 'Sharesheet.ShareSocialBar', 'Externally share a Pin/Board/profile');switch(e){case j.d.BOARD:return this.props.i18n._('Send this board', 'Sharesheet.ShareSocialBar', 'social media sharing board');case j.d.PIN:return this.props.i18n._('Send this Pin', 'Sharesheet.ShareSocialBar', 'social media sharing Pin');case j.d.PINNER:return this.props.i18n._('Send this profile', 'Sharesheet.ShareSocialBar', 'social media sharing pinner profile');default:return""}}getWhatsAppURL(){const e=this.getShareOptions(10);q.Z.createShareInviteData(e).then((e=>{const t=`${e.title}\n${e.invite_url}`;if(t){const s=encodeURIComponent(t);this.setState({whatsappInviteData:e,whatsappURL:"https://web.whatsapp.com/send?text="+s})}else this.setState({whatsappURL:"https://web.whatsapp.com/send?text="+(0,R.Z)(this.props.sharedObject.url)})}))}checkWritePermissions(){return!!this.props.viewer.isWriteBanned}handleSocialShareClick(e){if(this.checkWritePermissions())return;let t=46;"facebook"===e?(this.openFacebookDialog(),t=257):"twitter"===e?(this.openTwitterDialog(),t=256):"messenger"===e?(this.openFbMessengerDialog(),t=950):"whatsapp"===e?(this.openWhatsAppDialog(),t=951):"pincode"===e?this.props.onCreatePincodeClick&&this.props.onCreatePincodeClick():"copylink"===e?(this.openShareUrlLink(),t=100):"email"===e?(this.openEmailDialog(),t=258):"line"===e&&(this.openLineDialog(),t=952),this.props.onExternalSend&&this.props.onExternalSend(),this.props.logContextEvent({event_type:101,component:153,element:t})}openEmailDialog(){this.props.onEmailIconClick()}openFacebookDialog(){const{unauthId:e,viewer:t}=this.props;ie((()=>{q.Z.shareFacebookInvite({options:this.getShareOptions(5),unauthId:e,viewer:t})}),t)}openFbMessengerDialog(){const{unauthId:e,viewer:t}=this.props;ie((()=>{q.Z.shareFbMessengerInvite({options:this.getShareOptions(6),unauthId:e,viewer:t})}),t)}openWhatsAppDialog(){const e=this.getShareOptions(10);this.state.whatsAppLogged||(q.Z.logShareInvite(e,this.state.whatsappInviteData),this.setState({whatsAppLogged:!0}))}openShareUrlLink(){this.logShareInviteLink()}openTwitterDialog(){q.Z.shareTwitterInvite(this.getShareOptions(9))}openLineDialog(){q.Z.shareLineInvite(this.getShareOptions(8))}renderEmail(){const{inShareSheetRedesignExp:e}=this.props,t=e?c:48,s=e?86:72,i=e?2:0;return(0,h.jsxs)(W.Z,{width:s,marginEnd:!e,children:[(0,h.jsx)(d.xu,{display:"inlineBlock",marginBottom:i,children:(0,h.jsx)("button",{"aria-label":this.props.i18n._('Share on Email', 'sharesheet.shareSocialBar.ShareEmail', 'Button that will share via Email'),onClick:()=>this.handleSocialShareClick("email"),style:te,children:(0,h.jsx)(M.Z,{size:t})})}),(0,h.jsx)(N.Z,{text:this.props.i18n._('Email', 'Share via email', 'Share via email')})]},"email")}renderShareOptions(){const{i18n:e,inShareSheetRedesignExp:t,onCreatePincodeClick:s,sharedObject:n,showLineShare:o,isPublisherSharingObject:a}=this.props,r=t?c:48,l=t?86:72,_=t?2:0;return(0,h.jsxs)(i.Fragment,{children:[(0,h.jsxs)(d.kC,{alignItems:t?void 0:"stretch",justifyContent:t?"start":"around",children:[o&&(0,h.jsxs)(W.Z,{width:l,marginEnd:!t,children:[(0,h.jsx)(d.xu,{marginBottom:_,children:(0,h.jsx)("button",{"aria-label":e._('Share on LINE', 'sharesheet.shareSocialBar.ShareLine', 'Button that will share via Line'),onClick:()=>this.handleSocialShareClick("line"),style:te,children:(0,h.jsx)(U.Z,{size:r})})}),(0,h.jsx)(N.Z,{text:e._('LINE', 'sharesheet.shareSocialBar.ShareLineLabel', 'Line button label')})]}),(0,h.jsxs)(W.Z,{width:l,marginEnd:!t,children:[(0,h.jsx)(d.xu,{marginBottom:_,children:(0,h.jsx)("button",{"aria-label":e._('Share on WhatsApp', 'sharesheet.shareSocialBar.ShareWhatsapp', 'Button that will share via WhatsApp'),onClick:()=>this.handleSocialShareClick("whatsapp"),style:te,tabIndex:"-1",children:(0,h.jsx)(d.iP,{rounding:"circle",role:"link",href:this.state.whatsappURL,target:"blank",children:(0,h.jsx)(Y.Z,{size:r})})})}),(0,h.jsx)(N.Z,{text:e._('WhatsApp', 'sharesheet.shareSocialBar.ShareWhatsappLabel', 'WhatsApp button label')})]}),(0,h.jsxs)(W.Z,{width:l,marginEnd:!t,children:[(0,h.jsx)(d.xu,{marginBottom:_,children:(0,h.jsx)("button",{"aria-label":e._('Share on Facebook', 'sharesheet.shareSocialBar.ShareFacebook', 'Button that will share via Facebook'),onClick:()=>this.handleSocialShareClick("facebook"),style:te,children:(0,h.jsx)(H.Z,{size:r})})}),(0,h.jsx)(N.Z,{text:e._('Facebook', 'sharesheet.shareSocialBar.ShareFacebookLabel', 'Facebook button label')})]}),(0,h.jsxs)(W.Z,{width:l,marginEnd:!t&&!o,children:[(0,h.jsx)(d.xu,{marginBottom:_,children:(0,h.jsx)("button",{"aria-label":e._('Share on Twitter', 'sharesheet.shareSocialBar.ShareTwitter', 'Button that will share via Twitter'),onClick:()=>this.handleSocialShareClick("twitter"),style:te,"data-test-id":"twitter-share-icon",children:(0,h.jsx)(G.Z,{size:r})})}),(0,h.jsx)(N.Z,{text:e._('Twitter', 'sharesheet.shareSocialBar.ShareTwitterLabel', 'Twitter button label')})]}),t?(0,h.jsxs)(i.Fragment,{children:[(0,h.jsx)($,{iconSize:r,iconWrapperWidth:l,marginBottom:_,marginEnd:!t,onCreatePincodeClick:s,sharedObject:n}),(0,h.jsx)(D.default,{sharedObject:n,backgroundColor:ee,iconColor:Q,iconSize:r,iconWrapperWidth:l,marginEnd:o,isCloseupActionBar:!1,spaceBelowIcon:_},"copylink"),!a&&this.renderEmail()]}):!a&&!o&&(0,h.jsx)(W.Z,{width:l,marginEnd:!1,children:this.renderEmail()})]}),!t&&(0,h.jsxs)(d.xu,{display:"flex",paddingY:4,children:[(0,h.jsx)($,{iconSize:r,iconWrapperWidth:l,marginBottom:_,marginEnd:!t,onCreatePincodeClick:s,sharedObject:n}),(0,h.jsx)(D.default,{sharedObject:n,backgroundColor:ee,iconColor:Q,iconSize:r,iconWrapperWidth:l,marginEnd:o,isCloseupActionBar:!1,spaceBelowIcon:_},"copylink"),!a&&o&&this.renderEmail()]})]})}render(){const{inShareSheetRedesignExp:e,sharedObject:t,paddingX:s}=this.props;return(0,h.jsxs)(d.xu,{paddingX:s,children:[(0,h.jsx)(d.kC,{alignContent:"center",alignItems:"center",height:64,justifyContent:"center",children:(0,h.jsx)(d.xv,{size:"300",weight:"bold",children:this.getSendDisplayText(t.type)})}),(0,h.jsx)(d.xu,{height:e?98:void 0,paddingX:e?0:2,children:this.renderShareOptions()})]})}}function oe(e){const{logContextEvent:t}=(0,l.v)(),s=(0,o.ZP)(),i=(0,b.Z)(),n=i.isAuth&&se.has(i.country),a=(0,X.B)();return(0,h.jsx)(ne,{...e,toastManagerContext:(0,J.F9)(),viewer:(0,b.Z)(),showLineShare:n,i18n:s,logContextEvent:t,unauthId:a.unauthId})}var ae=s(172071),re=s(6637),le=s(499128),ce=s(717615),de=s(231947),he=s(862624),_e=s(758523);const ue=(e,t)=>{const s={};return e.forEach((e=>{s[e]=t})),s};function pe(e){const{logContextEvent:t}=(0,l.v)(),s=(0,o.ZP)(),n=(0,he.Y)().checkExperiment("web_share_sheet_redesign").anyEnabled,[a,r]=(0,i.useState)(!1),[c,_]=(0,i.useState)(null),[u,g]=(0,i.useState)({}),[f,w]=(0,i.useState)(""),[y]=(0,i.useState)(((e,t)=>"today_article"===e?t._('Check out this article on Pinterest!', 'sendObject.initialTextValue.todayArticle', 'pre-populated share message when a user tries to send a Today Article'):"")(e.sendType,s)),{showOneToast:S}=(0,J.F9)(),{surface:C}=(0,_e.$)(),P=(0,b.Z)(),k=(0,ce.Z)(),{conversationCreate:A}=(0,p.Z5)(),I=(0,p.NG)(),Z=(s,i)=>{r(!1),e.onMessageSent(),((s,i)=>{const{sharedObject:n}=e,o=n.id;ae.Z.increment("web.sharesheet.internal.send",1,{status:"success"}),t({event_type:180,element:276,object_id_str:o,aux_data:{conversation_id:s,pin_id:i}})})(s,i)},E=e=>{ae.Z.increment("web.sharesheet.internal.send",1,{status:"fail"});const t=e.message_detail||e.message;t&&S((({hideToast:e})=>(0,h.jsx)(le.ZP,{variant:"error",duration:5e3,onHide:e,text:t})))},O=async(t,s,i)=>{const{sharedObject:n,sendType:o}=e,a=n.id,r={emails:s,user_ids:t,text:i,source:m(C)};r[o]=a;const l=re.ZP.create("ConversationsResource",r);try{const e=await l.callCreate(),i=e&&e.resource_response.data;A(i),Z(i.id,"pin"===o?a:null),t.length>0?g({...u,...ue(t,i.id)}):g({...u,...ue(s,i.id)})}catch(c){E(c)}},L=(s,i)=>{"conversation_share_suggestion"===s.type?((t,s,i)=>{const{sharedObject:n,sendType:o}=e;let a;switch(o){case"pin":a="pinId";break;case"board":a="boardId";break;case"did_it":a="didItId";break;case"user":case"pinner":a="userId"}const r=a?I(t,{text:s,[a]:n.id,source:m(C)},void 0,P):void 0;r&&r.then((()=>{Z(t,"pin"===o?n.id:null),g({...u,[t]:t})})).catch((e=>{E(e)}))})(s.id,i):"user_share_suggestion"===s.type&&s.username?O([s.id],[],i):O([],[s.email],i),t({event_type:101,component:56,element:276})},T=(t,s)=>{e.sendType!==j.d.SEARCH||s?L(t,s):re.ZP.create("ShareLinkResource",{invite_category:10,url:e.sharedObject.url}).callCreate().then((e=>Promise.resolve(e.resource_response.data)),(e=>Promise.reject(e))).then((e=>{const s=e.message;L(t,s)}))},R=()=>{r(!1),_(null)},{onCreatePincodeClick:D,onShowImport:M,sendType:F,sharedObject:H,onHide:U,onExternalSend:V}=e,N="email"===c?(0,h.jsx)(z,{initialTextValue:y,inShareSheetRedesignExp:n,objectId:H.id,objectType:F,onCancelDraft:R,onHide:U,onSendMessage:T,width:n?540:360}):(0,h.jsx)(v,{initialTextValue:y,objectId:H.id,objectType:F,onCancelDraft:R,onHide:U,onSendMessage:T,recipient:"object"==typeof c?c:void 0}),W="user"===e.sendType&&(0,de.q6)(P,e.sharedObject.id,k),$=("board"===e.sendType||"pin"===e.sendType)&&void 0!==e.sharedObject.ownerId&&(0,de.q6)(P,e.sharedObject.ownerId,k),G=W||$;return a?N:(0,h.jsxs)(d.xu,{color:"default",paddingX:n?3:void 0,paddingY:n?2:void 0,width:n?540:void 0,children:[(0,h.jsx)(oe,{inShareSheetRedesignExp:n,onCreatePincodeClick:D,onEmailIconClick:()=>{r(!0),_("email")},onExternalSend:V,onHide:U,paddingX:n?0:4,sharedObject:H,isPublisherSharingObject:G}),!G&&(0,h.jsx)(d.xu,{children:n?(0,h.jsxs)(i.Fragment,{children:[(0,h.jsx)(d.xu,{marginTop:1,paddingX:3,paddingY:3,children:(0,h.jsx)(d.iz,{})}),(0,h.jsx)(x,{objectAttachment:{type:F,id:H.id},onHide:U,onSendMessage:T,onShowImportContacts:M,sentHistory:u})]}):(0,h.jsx)(B,{onChange:({value:e})=>{w(e),t({event_type:4113,component:13029,element:1043})},onHide:U,onSendMessage:T,onShowImportContacts:M,onShowSendDraft:e=>{r(!0),_(e),w("")},paddingX:n?0:4,sentHistory:u,value:f})})]})}var ge=s(808475);const xe=["facebook","google"];function me(e,t){return"facebook"===e?t._('Facebook', ' - ', ' -- '):"google"===e?t._('Google', ' - ', ' -- '):t._('Other', ' - ', ' -- ')}function fe(e,t,s){return"facebook"===e?s._('Friends who are on Pinterest', ' - ', ' -- '):"google"===e&&t&&-1!==t.indexOf("@gmail")?t:null}function we({onBack:e}){const t=(0,o.ZP)(),s=(0,b.Z)(),i=s.isAuth?s.email:null,n=xe.filter((e=>!s.isAuth||!1===s.socialNetwork[e].connected)),a=(0,ge.k)();return(0,h.jsx)(d.xu,{paddingX:1,paddingY:2,children:(0,h.jsxs)(d.kC,{gap:2,direction:"column",children:[(0,h.jsxs)(d.kC,{gap:2,alignItems:"center",children:[(0,h.jsx)(d.hU,{accessibilityLabel:t._('Back', ' - ', ' -- '),icon:"arrow-back",iconColor:"darkGray",onClick:e}),(0,h.jsx)(d.xv,{size:"300",weight:"bold",children:t._('Upload contacts from...', ' - ', ' -- ')})]}),(0,h.jsx)(d.kC,{direction:"column",gap:4,children:n.map((e=>(0,h.jsx)(d.xu,{paddingX:2,children:(0,h.jsxs)(d.iP,{onTap:()=>(e=>{a.handleConnect(e,!0,{},t)})(e),children:[(0,h.jsx)(d.xv,{size:"200",children:me(e,t)}),(0,h.jsx)(d.xv,{size:"200",children:fe(e,i,t)})]})},e)))})]})})}function be({onCreatePincodeClick:e,onExternalSend:t,onHide:s,sendType:n,sharedObject:o,viewType:r,viewParameter:c}){const{logContextEvent:_}=(0,l.v)(),[u,p]=(0,i.useState)(!1),[g,x]=(0,i.useState)(!1);(0,i.useEffect)((()=>(_({event_type:7120,object_id_str:o.id,view_type:r,view_parameter:c}),()=>{_({event_type:7121,object_id_str:o.id,view_type:r,view_parameter:c});_({event_type:g?7493:7492,view_type:r,view_parameter:c})})),[]);const m=()=>{p(!0)},f=()=>{p(!1)},w=()=>{x(!0)};return u?(0,h.jsx)(we,{onBack:f}):(0,h.jsx)(d.xu,{overflow:"hidden",zIndex:new d.Ry(a.fe-1),color:"default",children:(0,h.jsx)(pe,{onCreatePincodeClick:e,onHide:s,onShowImport:m,onMessageSent:w,onExternalSend:t,sendType:n,sharedObject:o})})}},239324:(e,t,s)=>{s.d(t,{Z:()=>a});var i=s(207112),n=s(883119),o=s(785893);const a=({text:e})=>(0,o.jsx)(n.xv,{align:"center",size:"100",children:(0,o.jsx)(i.Z,{maxWidthPx:128,maxHeightPx:50,children:e})})},518604:(e,t,s)=>{s.d(t,{Z:()=>o});var i=s(883119),n=s(785893);const o=({width:e,marginEnd:t,children:s})=>(0,n.jsx)(i.xu,{alignItems:"center",direction:"column",display:"flex",marginEnd:t?2:0,width:e,children:s})},484131:(e,t,s)=>{s.d(t,{Z:()=>i});const i=(0,s(667294).createContext)(!1)}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/15399-a040ff6391b3229d.mjs.map